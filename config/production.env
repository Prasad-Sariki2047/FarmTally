# FarmTally Production Environment Configuration
# Server: 147.93.153.247
# Generated: 2024-10-23

# ================================
# APPLICATION SETTINGS
# ================================
NODE_ENV=production
PORT=3000
LOG_LEVEL=info
DEBUG_MODE=false

# Application Metadata
APP_NAME=FarmTally User Role Management
APP_VERSION=1.0.0
SERVER_IP=147.93.153.247
DEPLOYMENT_ENVIRONMENT=production

# ================================
# DATABASE CONFIGURATION
# ================================
# PostgreSQL Primary Database
DATABASE_URL=postgresql://farmtally_prod_user:${POSTGRES_PASSWORD}@147.93.153.247:5432/farmtally_prod
POSTGRES_HOST=147.93.153.247
POSTGRES_PORT=5432
POSTGRES_DB=farmtally_prod
POSTGRES_USER=farmtally_prod_user
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD_IN_PRODUCTION
POSTGRES_SSL_MODE=require
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_CONNECTION_TIMEOUT=30000

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_ACQUIRE_TIMEOUT=60000

# ================================
# REDIS CACHE CONFIGURATION
# ================================
REDIS_URL=redis://:${REDIS_PASSWORD}@147.93.153.247:6379/0
REDIS_HOST=147.93.153.247
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD_IN_PRODUCTION
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
REDIS_CONNECTION_TIMEOUT=5000

# ================================
# SECURITY CONFIGURATION
# ================================
# JWT Configuration
JWT_SECRET=CHANGE_THIS_JWT_SECRET_MINIMUM_32_CHARACTERS_LONG
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=farmtally-147.93.153.247
JWT_AUDIENCE=farmtally-users

# Session Configuration
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_FOR_PRODUCTION
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# Password Hashing
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# CORS Configuration
CORS_ORIGIN=https://147.93.153.247,https://farmtally.local,https://www.farmtally.com
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# ================================
# SSL/TLS CONFIGURATION
# ================================
SSL_ENABLED=true
SSL_CERT_PATH=/opt/farmtally/ssl/farmtally.crt
SSL_KEY_PATH=/opt/farmtally/ssl/farmtally.key
SSL_CA_PATH=/opt/farmtally/ssl/ca.crt
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# ================================
# AUTHENTICATION SERVICES
# ================================
# Magic Link Configuration
MAGIC_LINK_EXPIRES_IN=15m
MAGIC_LINK_SECRET=CHANGE_THIS_MAGIC_LINK_SECRET
MAGIC_LINK_BASE_URL=https://147.93.153.247

# OTP Configuration
OTP_EXPIRES_IN=5m
OTP_MAX_ATTEMPTS=3
OTP_LENGTH=6
OTP_ALGORITHM=sha256

# Social Authentication - Google OAuth
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET
GOOGLE_REDIRECT_URI=https://147.93.153.247/api/auth/google/callback
GOOGLE_SCOPE=openid email profile

# ================================
# EMAIL SERVICE CONFIGURATION
# ================================
# SMTP Settings (Hostinger)
EMAIL_SERVICE_ENABLED=true
SMTP_HOST=smtp.hostinger.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@farmtally.in
SMTP_PASS=2t/!P1K]w
SMTP_FROM=noreply@farmtally.in
SMTP_FROM_NAME=FarmTally System

# Email Templates
EMAIL_TEMPLATE_DIR=/opt/farmtally/templates/email
EMAIL_LOGO_URL=https://147.93.153.247/static/logo.png
EMAIL_SUPPORT_URL=https://147.93.153.247/support
EMAIL_UNSUBSCRIBE_URL=https://147.93.153.247/unsubscribe

# Email Rate Limiting
EMAIL_RATE_LIMIT_PER_HOUR=100
EMAIL_RATE_LIMIT_PER_DAY=1000

# ================================
# SMS SERVICE CONFIGURATION
# ================================
# SMS Provider (Twilio example)
SMS_SERVICE_ENABLED=true
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=YOUR_TWILIO_ACCOUNT_SID
SMS_AUTH_TOKEN=YOUR_TWILIO_AUTH_TOKEN
SMS_FROM_NUMBER=+1234567890
SMS_WEBHOOK_URL=https://147.93.153.247/api/sms/webhook

# SMS Rate Limiting
SMS_RATE_LIMIT_PER_HOUR=50
SMS_RATE_LIMIT_PER_DAY=200

# ================================
# FILE UPLOAD CONFIGURATION
# ================================
UPLOAD_ENABLED=true
UPLOAD_DIR=/opt/farmtally/uploads
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=jpg,jpeg,png,pdf,doc,docx,xls,xlsx
UPLOAD_VIRUS_SCAN=true
UPLOAD_CDN_URL=https://cdn.farmtally.com

# ================================
# LOGGING CONFIGURATION
# ================================
# Application Logging
LOG_ENABLED=true
LOG_FILE_PATH=/opt/farmtally/logs/app/farmtally.log
LOG_MAX_SIZE=10485760
LOG_MAX_FILES=10
LOG_DATE_PATTERN=YYYY-MM-DD
LOG_COMPRESS=true

# Request Logging
REQUEST_LOG_ENABLED=true
REQUEST_LOG_FORMAT=combined
REQUEST_LOG_FILE=/opt/farmtally/logs/app/access.log

# Error Logging
ERROR_LOG_ENABLED=true
ERROR_LOG_FILE=/opt/farmtally/logs/app/error.log
ERROR_STACK_TRACE=false

# ================================
# MONITORING CONFIGURATION
# ================================
# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
METRICS_COLLECT_DEFAULT=true

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5000
DATABASE_HEALTH_CHECK=true
REDIS_HEALTH_CHECK=true
EXTERNAL_SERVICE_HEALTH_CHECK=true

# Performance Monitoring
APM_ENABLED=false
APM_SERVICE_NAME=farmtally-user-service
APM_SERVER_URL=http://apm-server:8200
APM_ENVIRONMENT=production

# ================================
# EXTERNAL API CONFIGURATION
# ================================
# Weather API (example)
WEATHER_API_ENABLED=false
WEATHER_API_KEY=YOUR_WEATHER_API_KEY
WEATHER_API_URL=https://api.openweathermap.org/data/2.5

# Market Data API (example)
MARKET_API_ENABLED=false
MARKET_API_KEY=YOUR_MARKET_API_KEY
MARKET_API_URL=https://api.marketdata.com/v1

# Geolocation API
GEO_API_ENABLED=false
GEO_API_KEY=YOUR_GEOLOCATION_API_KEY
GEO_API_URL=https://api.ipgeolocation.io/ipgeo

# ================================
# BACKUP CONFIGURATION
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# Cloud Storage (AWS S3 example)
BACKUP_CLOUD_ENABLED=false
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
AWS_REGION=us-east-1
AWS_S3_BUCKET=farmtally-backups-prod
AWS_S3_PREFIX=147.93.153.247

# ================================
# PERFORMANCE SETTINGS
# ================================
# Node.js Performance
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=16
CLUSTER_MODE=false
WORKER_PROCESSES=1

# HTTP Settings
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000
BODY_PARSER_LIMIT=10mb
JSON_LIMIT=1mb
URL_ENCODED_LIMIT=1mb

# Connection Pooling
HTTP_AGENT_KEEP_ALIVE=true
HTTP_AGENT_MAX_SOCKETS=50
HTTP_AGENT_MAX_FREE_SOCKETS=10

# ================================
# FEATURE FLAGS
# ================================
FEATURE_USER_REGISTRATION=true
FEATURE_SOCIAL_AUTH=true
FEATURE_OTP_AUTH=true
FEATURE_MAGIC_LINK_AUTH=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_SMS_VERIFICATION=true
FEATURE_AUDIT_LOGGING=true
FEATURE_RATE_LIMITING=true
FEATURE_METRICS_COLLECTION=true

# ================================
# DEVELOPMENT/DEBUG SETTINGS
# ================================
# These should be disabled in production
ENABLE_SWAGGER=false
ENABLE_GRAPHQL_PLAYGROUND=false
ENABLE_DEBUG_ROUTES=false
ENABLE_MOCK_SERVICES=false
SKIP_AUTH_FOR_TESTING=false

# ================================
# TIMEZONE AND LOCALIZATION
# ================================
TZ=UTC
DEFAULT_LOCALE=en-US
SUPPORTED_LOCALES=en-US,es-ES,fr-FR
DATE_FORMAT=YYYY-MM-DD
TIME_FORMAT=HH:mm:ss
CURRENCY=USD

# ================================
# NOTIFICATION SETTINGS
# ================================
NOTIFICATIONS_ENABLED=true
PUSH_NOTIFICATIONS_ENABLED=false
EMAIL_NOTIFICATIONS_ENABLED=true
SMS_NOTIFICATIONS_ENABLED=true
IN_APP_NOTIFICATIONS_ENABLED=true

# Notification Rate Limits
NOTIFICATION_RATE_LIMIT_PER_USER_HOUR=20
NOTIFICATION_RATE_LIMIT_PER_USER_DAY=100

# ================================
# COMPLIANCE AND PRIVACY
# ================================
GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=2555
PRIVACY_POLICY_URL=https://147.93.153.247/privacy
TERMS_OF_SERVICE_URL=https://147.93.153.247/terms
COOKIE_CONSENT_REQUIRED=true

# ================================
# MAINTENANCE MODE
# ================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=127.0.0.1,147.93.153.247